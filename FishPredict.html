<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>How fish are made</title>

<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest/dist/teachablemachine-image.min.js"></script>

<style>
*{
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    font-family: 'Segoe UI', sans-serif;
}

body{
    text-align: center;
    min-height: 100vh;
    color: white;
    background: linear-gradient(to bottom, #001d2e, #003b5c, #005f8f);
    overflow-x: hidden;
}

/* ‡∏ü‡∏≠‡∏á‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏•‡∏≠‡∏¢ */
body::before{
    content: "";
    position: fixed;
    width: 100%;
    height: 100%;
    background-image: radial-gradient(circle, rgba(255,255,255,0.15) 2px, transparent 2px);
    background-size: 60px 60px;
    animation: bubbles 20s linear infinite;
    pointer-events: none;
}

@keyframes bubbles{
    from{background-position-y: 0;}
    to{background-position-y: -1000px;}
}

h1{
    font-size: 9vw;
    font-weight: 900;
    margin: 30px 0;
    text-shadow: 0 0 20px rgba(0,255,255,0.7);
}

/* TAB MENU */
.tab-menu{
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-bottom: 30px;
    flex-wrap: wrap;
}

.tab-menu button{
    padding: 12px 28px;
    border: none;
    background: rgba(255,255,255,0.1);
    backdrop-filter: blur(10px);
    color: white;
    cursor: pointer;
    border-radius: 30px;
    font-size: 18px;
    transition: 0.3s;
}

.tab-menu button:hover{
    transform: translateY(-3px);
    background: rgba(0,255,255,0.3);
}

.tab-menu button.active{
    background: rgba(0,255,255,0.5);
}

/* PAGE */
.page{
    display: none;
    min-height: 60vh;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    padding: 20px;
    animation: fade 0.6s ease;
}

@keyframes fade{
    from{opacity: 0; transform: translateY(10px);}
    to{opacity: 1; transform: translateY(0);}
}

.page.active{
    display: flex;
}

/* CHECK PAGE */
#preview{
    margin-top: 20px;
    max-width: 320px;
    border-radius: 20px;
    border: 3px solid rgba(0,255,255,0.6);
    box-shadow: 0 0 30px rgba(0,255,255,0.5);
}

#result{
    margin-top: 25px;
    font-size: 26px;
    font-weight: bold;
    text-shadow: 0 0 10px cyan;
}

input[type="file"]{
    display: none;
}

label{
    padding: 14px 30px;
    background: rgba(0,255,255,0.4);
    color: white;
    cursor: pointer;
    border-radius: 30px;
    font-size: 20px;
    margin-top: 15px;
    transition: 0.3s;
}

label:hover{
    background: rgba(0,255,255,0.7);
    transform: scale(1.05);
}

/* ABOUT */
.about-text{
    max-width: 700px;
    font-size: 20px;
    line-height: 1.7;
    background: rgba(0,0,0,0.3);
    padding: 25px;
    border-radius: 20px;
    backdrop-filter: blur(10px);
    box-shadow: 0 0 20px rgba(0,255,255,0.3);
}
</style>
</head>

<body>

<h1>üêü How fish are made </h1>

<div class="tab-menu">
    <button class="tab-btn active" onclick="openTab(event,'home')">Home</button>
    <button class="tab-btn" onclick="openTab(event,'check')">Check</button>
    <button class="tab-btn" onclick="openTab(event,'about')">About Us</button>
</div>

<!-- HOME -->
<div id="home" class="page active">
    <h2>Welcome</h2>
    <p>‡πÄ‡∏ß‡πá‡∏ö‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ AI ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏†‡∏≤‡∏û‡∏õ‡∏•‡∏≤ ‡∏î‡πâ‡∏ß‡∏¢‡∏û‡∏•‡∏±‡∏á‡∏Ç‡∏≠‡∏á Teachable Machine ‡πÉ‡∏ï‡πâ‡∏ó‡∏∞‡πÄ‡∏•‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•</p>
</div>

<!-- CHECK -->
<div id="check" class="page">
    <label for="imageUpload">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏†‡∏≤‡∏û‡∏õ‡∏•‡∏≤</label>
    <input type="file" id="imageUpload" accept="image/*">

    <img id="preview">
    <div id="result"></div>
</div>

<!-- ABOUT -->
<div id="about" class="page">
    <div class="about-text">
        <h2>About Us</h2>
        <p>
            ‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏ô‡∏µ‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏î‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ Teachable Machine ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö TensorFlow.js
            ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡πÅ‡∏ô‡∏Å‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏†‡∏≤‡∏û ‡πÇ‡∏î‡∏¢‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Ñ‡∏•‡∏≤‡∏™‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏π‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
            ‡πÉ‡∏ô‡∏ò‡∏µ‡∏°‡πÇ‡∏•‡∏Å‡πÉ‡∏ï‡πâ‡∏ó‡∏∞‡πÄ‡∏•
        </p>
    </div>
</div>

<script>
const URL = "https://teachablemachine.withgoogle.com/models/xQJIUiFb0/";
let model;

async function loadModel(){
    const modelURL = URL + "model.json";
    const metadataURL = URL + "metadata.json";
    model = await tmImage.load(modelURL, metadataURL);
}
loadModel();

function openTab(event, tabId){
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));

    document.getElementById(tabId).classList.add('active');
    event.target.classList.add('active');
}

const imageUpload = document.getElementById("imageUpload");
const preview = document.getElementById("preview");
const result = document.getElementById("result");

imageUpload.addEventListener("change", function(event){
    const file = event.target.files[0];
    const reader = new FileReader();

    reader.onload = function(e){
        preview.src = e.target.result;
        preview.onload = () => predict(preview);
    }

    reader.readAsDataURL(file);
});

async function predict(image){
    const predictions = await model.predict(image);

    let highest = predictions[0];
    for(let i=1;i<predictions.length;i++){
        if(predictions[i].probability > highest.probability){
            highest = predictions[i];
        }
    }

    const percent = (highest.probability * 100).toFixed(2);

    result.innerHTML = `
        Class: ${highest.className} <br>
        Probability: ${percent}%
    `;
}
</script>

</body>
</html>
